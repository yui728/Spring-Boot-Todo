<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8" />
        <title th:text="${title}"></title>
    </head>
    <body>
        <h1 th:text="${title}"></h1>
        <p th:text="${message}"></p>
        <p><a data-th-href="@{/todo/new/}">新しいTodoを作成する</a></p>
        <table>
            <tr>
                <th>No.</th>
                <th>タイトル</th>
                <th>完了</th>
                <th>アーカイブ</th>
            </tr>
            <tr th:each="todo,iterStat : ${todoList}">
                <td th:text="${iterStat.count}"></td>
                <td th:text="${todo.title}"></td>
                <td th:text="${todo.completed}? '完了' : '未完了'"></td>
                <td th:text="${todo.archived}? '済' : ''"></td>
                <td th:unless="${todo.archived}"><a href="/todo/edit" data-th-href="@{/todo/edit/{id}/(id=${todo.id})}">編集</a></td>
                <td th:unless="${todo.archived}">
                    <button th:form="|archive-form-${todo.id}|" type="submit">アーカイブ</button>
                    <form method="post" action="#" th:action="@{/todo/archive/{id}/(id=${todo.id})}" th:id="|archive-form-${todo.id}|">
                    </form>
                </td>
                <td th:if="${todo.archived}">
                    <button th:form="|unarchive-form-${todo.id}|" type="submit">アーカイブ解除</button>
                    <form method="post" action="#" th:action="@{/todo/unarchive/{id}/(id=${todo.id})}" th:id="|unarchive-form-${todo.id}|">
                    </form>
                </td>
            </tr>
        </table>
    </body>
</html>